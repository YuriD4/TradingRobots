# GOLD Breakdown M5 Trading Robot

## Описание
Торговый робот для автоматической торговли золотом на основе пробоев уровней предыдущего дня. Робот отслеживает максимум и минимум предыдущего торгового дня и открывает позиции при пробое этих уровней на заданное количество пунктов.

## Логика работы

### Основные принципы
- **Торговый инструмент**: Золото (GOLD, XAUUSD)
- **Таймфрейм**: M5 (5-минутный)
- **Система пунктов**: 100 пунктов = $1 в цене золота

### Алгоритм торговли

1. **Определение уровней**
   - Каждый день робот определяет максимум и минимум предыдущего торгового дня
   - Рассчитывает уровни пробоя: High + 50 пунктов (BUY) и Low - 50 пунктов (SELL)

2. **Сигналы входа**
   - **BUY**: Цена пробивает на 50 пунктов выше максимума предыдущего дня
   - **SELL**: Цена пробивает на 50 пунктов ниже минимума предыдущего дня

3. **Управление рисками**
   - Стоп-лосс: 200 пунктов от цены входа (первая сделка), 150 пунктов (восстановительные)
   - Тейк-профит: 200 пунктов от цены входа (первая сделка), 150 пунктов (восстановительные)
   - Размер позиции: 0.01 лота на каждую $1000 депозита с геометрической прогрессией

4. **Система восстановления**
   - **1-я и 2-я сделки**: Немедленное открытие противоположной сделки после стопа
   - **Начиная с 3-й сделки**: Переход на динамические уровни последнего часа
   - **Динамические уровни**: Робот ждет пробоя максимума/минимума последнего часа на 50 пунктов
   - При прибыльной сделке торговля на день завершается

5. **Управление временем**
   - В 22:00 по терминальному времени все открытые позиции закрываются принудительно
   - В начале нового торгового дня все параметры сбрасываются
   - Рассчитываются новые уровни предыдущего дня

## Настраиваемые параметры

| Параметр | По умолчанию | Описание |
|----------|--------------|----------|
| `InpBreakoutPoints` | 50 | Пробой в пунктах для входа в рынок |
| **Параметры первой сделки (при пробое):** | | |
| `InpStopLossPoints` | 200 | Размер стоп-лосса первой сделки в пунктах |
| `InpTakeProfitPoints` | 200 | Размер тейк-профита первой сделки в пунктах |
| **Параметры восстановительных сделок:** | | |
| `InpRecoveryStopLossPoints` | 150 | Размер стоп-лосса восстановительных сделок в пунктах |
| `InpRecoveryTakeProfitPoints` | 150 | Размер тейк-профита восстановительных сделок в пунктах |
| **Общие параметры:** | | |
| `InpLotMultiplier` | 1.0 | Множитель размера лота (геометрическая прогрессия) |
| `InpMaxAdditionalTrades` | 1 | Максимальное количество дополнительных сделок после первого убытка |
| `InpMagicNumber` | 555777 | Уникальный идентификатор советника |
| `InpDebugMode` | true | Режим отладки |

## Особенности
- **Тихая работа**: Робот работает без вывода сообщений в журнал
- **Без визуализации**: Не создает графических объектов на графике
- **Автоматическое закрытие**: Принудительно закрывает позиции в 22:00

## Пример работы

### Стандартная последовательность (1-2 сделки):
1. Предыдущий день: High = 2650.00, Low = 2630.00
2. Уровни пробоя: BUY = 2650.50, SELL = 2629.50
3. Цена пробивает 2650.50 → открывается **1-я** BUY с лотом 0.01, SL=2648.50, TP=2652.50 (200 пунктов)
4. Если BUY закрывается по SL → **немедленно** открывается **2-я** SELL с лотом 0.02, SL/TP=150 пунктов

### Динамическая последовательность (начиная с 3-й сделки):
5. Если 2-я SELL закрывается по SL → робот переходит в режим ожидания
6. Рассчитываются уровни последнего часа: например, High = 2651.20, Low = 2649.80
7. Робот ждет пробоя: BUY = 2651.70 или SELL = 2649.30 (50 пунктов от часовых уровней)
8. При пробое открывается **3-я** сделка с лотом 0.04, SL/TP=150 пунктов
9. Если 3-я сделка закрывается по SL → заново рассчитываются часовые уровни для 4-й сделки
10. Процесс продолжается до прибыли или достижения максимального количества сделок

### Логика SL/TP:
- **Первая сделка** (при пробое): 200 пунктов SL/TP
- **Восстановительные сделки** (после стопа): 150 пунктов SL/TP (настраивается отдельно)

### Логика размера лота:
- **1-я сделка**: Базовый лот (например, 0.01)
- **2-я сделка**: Базовый лот × Множитель¹ (например, 0.01 × 2.0 = 0.02)
- **3-я сделка**: Базовый лот × Множитель² (например, 0.01 × 2.0² = 0.04) + ожидание пробоя часовых уровней
- **4-я сделка**: Базовый лот × Множитель³ (например, 0.01 × 2.0³ = 0.08) + ожидание пробоя новых часовых уровней

### Логика входа:
- **1-2 сделки**: Немедленный вход после стопа предыдущей сделки
- **3+ сделки**: Вход только после пробоя динамических уровней последнего часа на 50 пунктов

## Установка и запуск
1. Скопировать файл `GoldBreakdownM5.mq5` в папку `MQL5/Experts`
2. Перекомпилировать в MetaEditor
3. Прикрепить к графику золота на таймфрейме M5
4. Настроить параметры по необходимости
5. Включить автоторговлю

## Рекомендации
- Использовать только на графике золота (XAUUSD, GOLD)
- Рекомендуемый депозит: от $1000
- Следить за новостными событиями, влияющими на золото
- Регулярно проверять работу робота в режиме отладки

## Внимание
Торговля на финансовых рынках связана с высокими рисками. Тестируйте робота на демо-счете перед использованием на реальном счете.